<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGear | BMI Calculator</title>
</head>

<body>
    <div id="app-header"></div>

    <main class="main">
        <div class="header-area">
            <div class="page-info">
                <h1 data-i18n="bmi_title">BMI Calculator</h1>
                <p data-i18n="bmi_desc">Find your ideal weight.</p>
            </div>
        </div>

        <div class="tool-view active" style="display:block; max-width:600px; margin:0 auto;">
            <div class="field">
                <label data-i18n="weight">Weight (kg)</label>
                <input type="number" id="weight" placeholder="Example: 70">
            </div>
            <div class="field">
                <label data-i18n="height">Height (cm)</label>
                <input type="number" id="height" placeholder="Example: 170">
            </div>

            <button class="run-btn" onclick="calculateBMI()" data-i18n="calc">Calculate</button>

            <div class="output-area" id="resultBox" style="display:none; margin-top:20px;">
                <label data-i18n="result">Result:</label>
                <div class="output-val" id="bmiValue"></div>
            </div>
        </div>
    </main>

    <div id="app-footer"></div>
    <script src="../../global.js"></script>

    <script>
        const pageDict = {
            'ar': { 'bmi_title': 'حاسبة كتلة الجسم', 'bmi_desc': 'اعرف وزنك المثالي', 'weight': 'الوزن (كجم)', 'height': 'الطول (سم)', 'calc': 'احسب', 'result': 'النتيجة', 'underweight': 'نحافة', 'normal': 'وزن طبيعي', 'overweight': 'وزن زائد' },
            'en': { 'bmi_title': 'BMI Calculator', 'bmi_desc': 'Find your ideal weight', 'weight': 'Weight (kg)', 'height': 'Height (cm)', 'calc': 'Calculate', 'result': 'Result', 'underweight': 'Underweight', 'normal': 'Normal', 'overweight': 'Overweight' }
        };

        window.addEventListener('DOMContentLoaded', () => {
            const lang = window.NextGear.lang || 'en';
            const dict = pageDict[lang] || pageDict['en'];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (dict[key]) el.innerText = dict[key];
            });
        });

        function calculateBMI() {
            const w = parseFloat(document.getElementById('weight').value);
            const h = parseFloat(document.getElementById('height').value) / 100;

            if (!w || !h) return alert(window.NextGear.isRTL ? 'الرجاء إدخال البيانات' : 'Please enter values');

            const bmi = (w / (h * h)).toFixed(1);
            let status = '';

            const lang = window.NextGear.lang || 'en';
            const dict = pageDict[lang] || pageDict['en'];

            if (bmi < 18.5) status = dict['underweight'];
            else if (bmi < 25) status = dict['normal'];
            else status = dict['overweight'];

            const resultDiv = document.getElementById('resultBox');
            const valDiv = document.getElementById('bmiValue');

            resultDiv.style.display = 'block';
            valDiv.innerHTML = `<span style="font-size:2rem;color:${bmi < 25 && bmi > 18.5 ? 'green' : 'red'}">${bmi}</span> <br> ${status}`;
        }
    </script>
</body>

</html>