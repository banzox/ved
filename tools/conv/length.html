<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGear | Length Converter</title>
</head>

<body>
    <div id="app-header"></div>
    <main class="main">
        <div class="header-area">
            <div class="page-info">
                <h1 data-i18n="len_title">Length Converter</h1>
                <p data-i18n="len_desc">Convert between Meter, Kilometer, Foot, and Inch.</p>
            </div>
        </div>
        <div class="tool-view active" style="max-width:600px; margin:0 auto">
            <div class="field">
                <label data-i18n="val">Value</label>
                <input type="number" id="inpVal" placeholder="1" oninput="convert()" value="1">
            </div>
            <div class="field">
                <label data-i18n="from">From</label>
                <select id="fromUnit" onchange="convert()">
                    <option value="m">Meter (m)</option>
                    <option value="km">Kilometer (km)</option>
                    <option value="cm">Centimeter (cm)</option>
                    <option value="ft">Foot (ft)</option>
                    <option value="in">Inch (in)</option>
                </select>
            </div>
            <div class="field">
                <label data-i18n="to">To</label>
                <select id="toUnit" onchange="convert()">
                    <option value="m">Meter (m)</option>
                    <option value="km" selected>Kilometer (km)</option>
                    <option value="cm">Centimeter (cm)</option>
                    <option value="ft">Foot (ft)</option>
                    <option value="in">Inch (in)</option>
                </select>
            </div>
            <div class="output-area" style="display:block">
                <div class="output-val" id="outVal">0.001</div>
            </div>
        </div>
    </main>
    <div id="app-footer"></div>
    <script src="../../global.js"></script>
    <script>
        const rates = { 'm': 1, 'km': 1000, 'cm': 0.01, 'ft': 0.3048, 'in': 0.0254 };

        const pageDict = {
            'ar': { 'len_title': 'محول الطول', 'len_desc': 'تحويل بين المتر، الكيلو، القدم، والإنش', 'val': 'القيمة', 'from': 'من', 'to': 'إلى' },
            'en': { 'len_title': 'Length Converter', 'len_desc': 'Convert Length Units', 'val': 'Value', 'from': 'From', 'to': 'To' }
        };

        window.addEventListener('DOMContentLoaded', () => {
            const lang = window.NextGear.lang || 'en';
            const dict = pageDict[lang] || pageDict['en'];
            document.querySelectorAll('[data-i18n]').forEach(el => el.innerText = dict[el.getAttribute('data-i18n')] || el.innerText);
            convert();
        });

        function convert() {
            const val = parseFloat(document.getElementById('inpVal').value) || 0;
            const from = document.getElementById('fromUnit').value;
            const to = document.getElementById('toUnit').value;

            // Convert to base (meter) then to target
            const inMeters = val * rates[from];
            const result = inMeters / rates[to];

            document.getElementById('outVal').innerText = Number.isInteger(result) ? result : result.toLocaleString(undefined, { maximumFractionDigits: 6 });
        }
    </script>
</body>

</html>